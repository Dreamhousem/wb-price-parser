# WB Price Parser (BY)

–°–∫—Ä–∏–ø—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ü–µ–Ω **Wildberries –ë–µ–ª–∞—Ä—É—Å—å** –ø–æ –∞—Ä—Ç–∏–∫—É–ª–∞–º (nmId): –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ WB API, —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∏—Ç–æ–≥–æ–≤—É—é —Ü–µ–Ω—É –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤ CSV (—É–¥–æ–±–Ω–æ –¥–ª—è Excel).

---

## üöÄ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1) –ó–∞–ø—Ä–æ—Å –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
–°–∫—Ä–∏–ø—Ç –¥–µ–ª–∞–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å—ã –∫ WB API, **—ç–º—É–ª–∏—Ä—É—è –ø–æ–≤–µ–¥–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞** (—á–µ—Ä–µ–∑ `User-Agent`) –∏ –Ω–µ ¬´–ø–∞–¥–∞–µ—Ç¬ª –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö.

–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Ç–∏–ø–æ–≤—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏:

- **HTTP –æ—à–∏–±–∫–∏ (4xx/5xx)** ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏/–æ—à–∏–±–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–µ –ª–æ–º–∞—é—Ç –≤–µ—Å—å –∑–∞–ø—É—Å–∫
- **Network / Timeout** ‚Äî —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ–º—É –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É –∏ –∑–∞–≤–∏—Å–∞–Ω–∏—è–º
- **JSON Decode** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—É–ª JSON, –∞ –Ω–µ ¬´–º—É—Å–æ—Ä¬ª

---

### 2) –ü–∞—Ä—Å–∏–Ω–≥ —Ü–µ–Ω—ã
WB API –æ—Ç–¥–∞—ë—Ç —Å–ª–æ–∂–Ω—ã–π JSON. –ü–∞—Ä—Å–µ—Ä —É–º–µ–µ—Ç:

- –Ω–∞—Ö–æ–¥–∏—Ç—å –±–ª–æ–∫ —Ü–µ–Ω—ã –≤ –æ—Ç–≤–µ—Ç–µ (–≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å –≤ `sizes -> price`, —Å —Ñ–æ–ª–±—ç–∫–∞–º–∏)
- —Å—á–∏—Ç–∞—Ç—å –∏—Ç–æ–≥–æ–≤—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ —Ñ–æ—Ä–º—É–ª–µ:

`total = product + logistics + return`

- –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å ¬´–∫–æ–ø–µ–π–∫–∏¬ª –≤ BYN –Ω–∞ –æ—Å–Ω–æ–≤–µ `price_divider` (–æ–±—ã—á–Ω–æ 100)
- –æ–∫—Ä—É–≥–ª—è—Ç—å –∏ –≤—ã–≤–æ–¥–∏—Ç—å —Ü–µ–Ω—É –≤ —É–¥–æ–±–Ω–æ–º –≤–∏–¥–µ

---

### 3) –í—ã–≤–æ–¥ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏
- –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–≤–æ–¥–∏—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å —Å –ø–æ–Ω—è—Ç–Ω—ã–º —Å—Ç–∞—Ç—É—Å–æ–º (—á–µ—Ä–µ–∑ emoji)
- –ö–∞–∂–¥—ã–π –∑–∞–º–µ—Ä —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `prices.csv`:
  - —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å `;` (—É–¥–æ–±–Ω–æ –¥–ª—è Excel)
  - –¥–µ—Å—è—Ç–∏—á–Ω—ã–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å `,` (—á—Ç–æ–±—ã Excel –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–Ω—è–ª —á–∏—Å–ª–æ)

–ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏:

```text
‚úÖ –°—É–º–∫–∞ —Å–ø–æ—Ä—Ç–∏–≤–Ω–∞—è (333165372) -> 55.00 BYN
   üî• –í–ù–ò–ú–ê–ù–ò–ï! –¶–µ–Ω–∞ –Ω–∏–∂–µ 55.0!
```

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1) –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone <repo_url>
cd <repo_folder>
```

### 2) –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

```bash
python3 -m venv venv
source venv/bin/activate
```

### 3) –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- urllib3 (—Å–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã)
- charset-normalizer (–∫–æ–¥–∏—Ä–æ–≤–∫–∏)
- idna (–¥–æ–º–µ–Ω—ã)
- certifi (—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã HTTPS)

```bash
pip install -r requirements.txt
```
–ï—Å–ª–∏ —Ñ–∞–π–ª–∞ requirements.txt –Ω–µ—Ç ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏ –º–∏–Ω–∏–º—É–º: 
```bash
pip install requests
```

---

## üßæ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Ö—Ä–∞–Ω–∏—Ç—Å—è –ø—Ä–∏–º–µ—Ä: `config.example.json`.

1) –°–∫–æ–ø–∏—Ä—É–π –ø—Ä–∏–º–µ—Ä –≤ —Ä–∞–±–æ—á–∏–π –∫–æ–Ω—Ñ–∏–≥:

```bash
cp config.example.json config.json
```

2) –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π `config.json` –ø–æ–¥ —Å–µ–±—è.

### settings

- `currency` ‚Äî –≤–∞–ª—é—Ç–∞ (`byn`)
- `dest` ‚Äî —Ä–µ–≥–∏–æ–Ω –¥–æ—Å—Ç–∞–≤–∫–∏ (–≤–∞–∂–Ω–æ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ü–µ–Ω—ã/–ª–æ–≥–∏—Å—Ç–∏–∫–∏)
- `spp` ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä —É—Å–ª–æ–≤–∏–π/—Å–∫–∏–¥–∫–∏ WB (—Ñ–∏–∫—Å–∏—Ä—É–µ–º, —á—Ç–æ–±—ã —Ü–µ–Ω–∞ –±—ã–ª–∞ —Å—Ç–∞–±–∏–ª—å–Ω–µ–µ)
- `sleep_seconds` ‚Äî –ø–∞—É–∑–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ (—á—Ç–æ–±—ã –Ω–µ ¬´–¥—Ä–∞–∑–Ω–∏—Ç—å¬ª WB)
- `timeout_seconds` ‚Äî —Ç–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–∞
- `price_divider` ‚Äî –¥–µ–ª–∏—Ç–µ–ª—å –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ –∫–æ–ø–µ–µ–∫ –≤ BYN (–æ–±—ã—á–Ω–æ 100)

### items

–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤:

- `id` ‚Äî –∞—Ä—Ç–∏–∫—É–ª WB (nmId)
- `name` ‚Äî –∏–º—è —Ç–æ–≤–∞—Ä–∞ –¥–ª—è —á–∏—Ç–∞–µ–º–æ–≥–æ –≤—ã–≤–æ–¥–∞
- `target_price` ‚Äî —Ü–µ–ª–µ–≤–∞—è —Ü–µ–Ω–∞ (–µ—Å–ª–∏ `total <= target_price` ‚Äî –≤—ã–≤–æ–¥–∏–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ)

–ü—Ä–∏–º–µ—Ä:

```json
{
  "settings": {
    "currency": "byn",
    "dest": "-59246",
    "spp": "30",
    "sleep_seconds": 1,
    "timeout_seconds": 10,
    "price_divider": 100
  },
  "items": [
    {
      "id": 333165372,
      "name": "–°—É–º–∫–∞ —Å–ø–æ—Ä—Ç–∏–≤–Ω–∞—è",
      "target_price": 55.0
    }
  ]
}
```

---

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫

```bash
python main.py
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:
- —É–≤–∏–¥–∏—à—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∫–æ–Ω—Å–æ–ª–∏
- –ø–æ–ª—É—á–∏—à—å –∏—Å—Ç–æ—Ä–∏—é –∑–∞–º–µ—Ä–æ–≤ –≤ `prices.csv`

---

## üìÑ –§–æ—Ä–º–∞—Ç `prices.csv`

–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å: `;`

–ö–æ–ª–æ–Ω–∫–∏:
- `timestamp`
- `id`
- `name`
- `product_price`
- `logistics`
- `return`
- `total_price`

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ Git

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
- –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—å ¬´–∂–∏–≤–æ–π¬ª `config.json` –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `config.example.json` –∫–∞–∫ —à–∞–±–ª–æ–Ω

---

## üó∫Ô∏è Roadmap (–∏–¥–µ–∏ –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é –≤–µ—Ä—Å–∏—é)

- —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –ø—Ä–∏ —Å–Ω–∏–∂–µ–Ω–∏–∏ —Ü–µ–Ω—ã
- —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –≤ SQLite + –æ—Ç—á—ë—Ç ¬´–º–∏–Ω–∏–º—É–º –∑–∞ 24—á/7–¥¬ª
- –∑–∞—â–∏—Ç–∞ –æ—Ç ¬´—Ñ–ª—É–¥–∞¬ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–∞–Ω—Ç–∏-—Å–ø–∞–º)
